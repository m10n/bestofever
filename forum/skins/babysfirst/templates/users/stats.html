{% extends "user.html" %}
<!-- user_stats.html -->
{% load i18n %}
{% load extra_tags %}
{% load extra_filters %}
{% load humanize %}
{% load question_list_tags %}


{% block usercontent %}
<div class="user-stats">
    <div class="row clearfix">
            <div class="col-md-4 column">
                <div class="stat-header">
                    <div class="row clearfix">
                        <div class="col-md-4 column">
                            <a name="questions"></a>
                            <div class="subheader"><h4>{% blocktrans count questions.paginator.count as counter %}
                                <span class="count">{{counter}}</span> List{% plural %}
                                <span class="count">{{counter}}</span> Lists{% endblocktrans %}</h4>
                            </div>
                        </div>
                        <div class="col-md-8 column">
                            <div class="tabsB">{{ questions.paginator.sort_tabs }}</div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix">
                    <div class="col-md-12 column">
                            {% if questions %}
                            {% for question in questions.paginator.page %}
                                {% question_list_item question %}
                                {% endfor %}
                            {% else %}Sorry, no lists yet.
                            {% endif %}
                                <div class="pager">{{ questions.paginator.page_numbers }}</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 column">
                <div class="stat-header">
                    <div class="row clearfix">
                        <div class="col-md-4 column">
                            <a name="answers"></a>
                            <div class="subheader"><h4>{% blocktrans count answers.paginator.count as counter %}
                                <span class="count">{{counter}}</span> Lines{% plural %}
                                <span class="count">{{counter}}</span> Lines{% endblocktrans %}</h4>
                            </div>
                        </div>
                        <div class="col-md-8 column">
                            <div class="tabsB">{{ answers.paginator.sort_tabs }}</div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix">
                    <div class="col-md-12 column">
                    {% if answers %}
                        {% for answer in answers.paginator.page %}
                        <div class="short-summary">
                            <a class="biglink" href="{{ answer.get_absolute_url }}"></a>
                            <div id="list-row2" class="row">
                                    <div class="media">
                                        <a class="pull-right" href="{{ answer.question.author.get_profile_url }}">{% gravatar answer.question.author 30 %}
                                        </a>
                                      <span class="headline"><h5><a href="{{ answer.question.get_absolute_url }}">{{ answer.question.headline }}</h5></a>
                                      </span>
                                    </div>
                            </div>
                            <div id="list-row1">
                                <div class="col-md-12">
                                    <div class="counts">
                                        <div class="item-count">{{answer.score|intcomma}}
                                            {% ifequal answer.score 1 %}vote{% else %}votes{% endifequal %}
                                             <span class="{% if answer.nis.accepted %}answered-accepted {% endif %} answer-votes"
                                                   title="{% blocktrans with answer.score as vote_count %}the answer has been voted for {{ vote_count }} times{% endblocktrans %} {% if answer.nis.accepted %}{% trans "this answer has been selected as correct" %}{%endif%}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="list-row3" class="row">
                                    <div class="media">
                                        <img class="media-object"><a href="{{ answer.author.get_profile_url }}" class="pull-right">{% gravatar answer.author 48 %}</a>
                                        <div class="media-body">
                                            <span class="sample-answer"><a href="{{ answer.get_absolute_url }}">{{ answer.html|safe }}</a></span>
                                        </div>
                                    </div>
                            </div>
                            <div id="list-row4" class="row">
                                        <div class="top-poster">
                                            <span class="posted">&mdash;<a href="{{ answer.author.get_profile_url }}">
                                                {{ answer.author.decorated_name }}</a></span>
                                                <span class="posted-date"><a href="{{ answer.get_absolute_url }}"> {% diff_date answer.added_at %}</a></span>
                                        </div>
                            </div>
                        </div>
                        {% endfor %}
                        {% else %}Sorry, no lines yet.
                        {% endif %}
                        <div class="pager">{{ answers.paginator.page_numbers }}</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 column">
                <div class="stat-header">
                    <div class="row clearfix">
                        <div class="col-md-4 column">
                            <h4>{% blocktrans count vote.node.paginator.count as counter %}
                                <span class="count">{{counter}}</span> Vote{% plural %}
                                <span class="count">{{counter}}</span> Votes{% endblocktrans %}
                            </h4>
                        </div>
                        <div class="col-md-8 column">
                            <div class="tabsB">{{ vote.node.paginator.sort_tabs }}</div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix">
                    <div class="col-md-12 column">
                        {% if votes %}
                        {% for vote in votes %}
                        <div class="answer-summary">
                        {% gravatar vote.node.author 48 %}{{ vote.node.score }}
                             <span class="{{ vote.node.node_type }}-title-link"><a href="{{ vote.node.get_absolute_url }}">{{ vote.node.headline }}
                                 {{ vote.node.html|safe }}</a></span>
                        {% ifequal vote.value 1 %}<img src="{% media  "/media/images/vote-arrow-up-on.png" %}" title="{% trans "upvote" %}">
                        {% else %}<img src="{% media  "/media/images/vote-arrow-down-on.png" %}" title="{% trans "downvote" %}">
                        {{ post.score }}
                        {% endifequal %}
                    </div>
                    <div class="action-date">{% diff_date vote.voted_at 3 %}</div>
                </div>
                        {% endfor %}
                        {% else %}Sorry, no votes yet.
                        {% endif %}
                    </div>
            </div>
    </div>
    <div class="row clearfix">
        <div id="user-tags" class="col-md-12 column">
            <div class="stat-header">
                <h4>{% blocktrans count user_tags|length as counter %}
                    <span class="count">{{counter}}</span> Category{% plural %}
                    <span class="count">{{counter}}</span> Categories{% endblocktrans %}</h4>
            </div>
        </div>
    </div>
    <div class="row clearfix">
    {% for tag in user_tags %}
        <div class="col-md-2 column">
                    <a name="tags"></a>
                    <a rel="tag" class="tag-link-{{ tag.name }}"
                         title="{% blocktrans with tag.name as tag_name %}see other questions with {{view_user}}'s contributions tagged '{{ tag_name }}' {% endblocktrans %}"
                         href="{% url tag_questions tag|urlencode %}?user={{view_user.username}}">{{tag.name}}</a>
                    <span class="tag-number">&#215; {{ tag.user_tag_usage_count|intcomma }}</span><br/>
        </div>
    {% if forloop.counter|divisibleby:"6" %}
    {% endif %}
    {% endfor %}
    </div>
</div>
{% endblock %}
